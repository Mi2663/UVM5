<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>УВМ (Учебная Виртуальная Машина) - Вариант 5</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-microchip"></i> УВМ (Учебная Виртуальная Машина) - Вариант 5</h1>
        </header>

        <div class="tabs">
            <button class="tab-btn active" data-tab="program">Программа</button>
            <button class="tab-btn" data-tab="memory">Память и вывод</button>
            <button class="tab-btn" data-tab="help">Справка</button>
        </div>

        <div class="tab-content active" id="program-tab">
            <div class="toolbar">
                <button id="new-btn" title="Новый файл (Ctrl+N)"><i class="fas fa-file"></i> Новый</button>
                <button id="open-btn" title="Открыть файл (Ctrl+O)"><i class="fas fa-folder-open"></i> Открыть</button>
                <button id="save-btn" title="Сохранить файл (Ctrl+S)"><i class="fas fa-save"></i> Сохранить</button>
                <button id="save-as-btn" title="Сохранить как"><i class="fas fa-save"></i> Сохранить как</button>
                
                <div class="separator"></div>
                
                <button id="load-example-btn" title="Загрузить пример"><i class="fas fa-download"></i> Загрузить пример</button>
                <button id="clear-btn" title="Очистить редактор"><i class="fas fa-broom"></i> Очистить</button>
            </div>

            <div class="editor-container">
                <textarea id="editor" placeholder="Введите программу на ассемблере УВМ...">
; Пример программы для УВМ (Вариант 5)
; Тестовая программа из спецификации

LOAD_CONST 343   ; Тест: A=2, B=343 → 0xBA, 0x0A
LOAD_MEM   365   ; Тест: A=3, B=365 → 0x6B, 0x0B, 0x00, 0x00
STORE_MEM  899   ; Тест: A=1, B=899 → 0x19, 0x1C
ROL             ; Тест: A=4 → 0x04

; Дополнительные тестовые операции
LOAD_CONST 100   ; Загрузка константы 100
STORE_MEM  0     ; Запись по адресу 0
LOAD_MEM   133   ; Чтение MEM[133] (должно быть 42)</textarea>
            </div>
        </div>

        <div class="tab-content" id="memory-tab">
            <div class="output-section">
                <h3><i class="fas fa-terminal"></i> Вывод ассемблера и интерпретатора:</h3>
                <div class="output-container">
                    <pre id="output"></pre>
                </div>
            </div>

            <div class="memory-section">
                <h3><i class="fas fa-memory"></i> Дамп памяти</h3>
                
                <div class="memory-controls">
                    <div class="control-group">
                        <label for="start-addr">Начало:</label>
                        <input type="number" id="start-addr" value="0" min="0" max="65535">
                    </div>
                    <div class="control-group">
                        <label for="end-addr">Конец:</label>
                        <input type="number" id="end-addr" value="100" min="0" max="65535">
                    </div>
                    <button id="refresh-memory-btn"><i class="fas fa-sync-alt"></i> Обновить</button>
                    <button id="save-dump-btn"><i class="fas fa-download"></i> Сохранить дамп</button>
                </div>

                <div class="memory-container">
                    <pre id="memory-dump"></pre>
                </div>
            </div>
        </div>

        <div class="tab-content" id="help-tab">
            <div class="help-content">
                <h2><i class="fas fa-info-circle"></i> УВМ (Учебная Виртуальная Машина) - Вариант 5</h2>
                
                <h3><i class="fas fa-code"></i> ДОСТУПНЫЕ КОМАНДЫ:</h3>
                
                <div class="command-list">
                    <div class="command">
                        <h4>1. LOAD_CONST &lt;value&gt;</h4>
                        <p>Загрузка константы на стек</p>
                        <p><strong>Диапазон:</strong> 0-1023</p>
                        <p><strong>Пример:</strong> LOAD_CONST 100</p>
                    </div>
                    
                    <div class="command">
                        <h4>2. LOAD_MEM &lt;address&gt;</h4>
                        <p>Чтение из памяти по адресу</p>
                        <p><strong>Диапазон:</strong> 0-16777215</p>
                        <p><strong>Пример:</strong> LOAD_MEM 500</p>
                    </div>
                    
                    <div class="command">
                        <h4>3. STORE_MEM &lt;offset&gt;</h4>
                        <p>Запись в память (стек + смещение)</p>
                        <p><strong>Диапазон:</strong> -4096..4095</p>
                        <p><strong>Пример:</strong> STORE_MEM 10</p>
                    </div>
                    
                    <div class="command">
                        <h4>4. ROL</h4>
                        <p>Циклический сдвиг влево</p>
                        <p><strong>Пример:</strong> ROL</p>
                    </div>
                </div>
                
                <h3><i class="fas fa-edit"></i> ФОРМАТ ПРОГРАММЫ:</h3>
                <ul>
                    <li>Одна команда на строку</li>
                    <li>Комментарии начинаются с <code>;</code></li>
                    <li>Регистр команд не важен</li>
                    <li>Пробелы и табуляции игнорируются</li>
                </ul>
                
                <h3><i class="fas fa-keyboard"></i> ГОРЯЧИЕ КЛАВИШИ:</h3>
                <div class="shortcuts">
                    <div class="shortcut"><kbd>Ctrl+N</kbd> - Новый файл</div>
                    <div class="shortcut"><kbd>Ctrl+O</kbd> - Открыть файл</div>
                    <div class="shortcut"><kbd>Ctrl+S</kbd> - Сохранить файл</div>
                    <div class="shortcut"><kbd>Ctrl+R</kbd> - Запустить программу</div>
                    <div class="shortcut"><kbd>F5</kbd> - Ассемблировать и выполнить</div>
                    <div class="shortcut"><kbd>F1</kbd> - Справка</div>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <div class="status" id="status">
                <i class="fas fa-check-circle"></i> <span id="status-text">Готово</span>
            </div>
            
            <div class="buttons">
                <button id="assemble-btn" class="btn-secondary"><i class="fas fa-cogs"></i> Ассемблировать</button>
                <button id="run-btn" class="btn-secondary"><i class="fas fa-play"></i> Выполнить</button>
                <button id="assemble-run-btn" class="btn-primary"><i class="fas fa-bolt"></i> Ассемблировать и выполнить</button>
            </div>
        </div>
    </div>

    <!-- Диалоговое окно для сохранения файла -->
    <div id="save-dialog" class="modal">
        <div class="modal-content">
            <h3>Сохранить файл</h3>
            <input type="text" id="filename" placeholder="program.asm" value="program.asm">
            <div class="modal-buttons">
                <button id="save-cancel-btn">Отмена</button>
                <button id="save-confirm-btn">Сохранить</button>
            </div>
        </div>
    </div>

    <!-- Диалоговое окно для открытия файла -->
    <input type="file" id="file-input" accept=".asm,.txt" style="display: none;">

    <script src="script.js"></script>
</body>
</html>
